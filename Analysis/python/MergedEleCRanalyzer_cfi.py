import FWCore.ParameterSet.Config as cms

mergedEleCRanalyzer = cms.EDAnalyzer("MergedEleCRanalyzer",
  isMC = cms.bool(True),
  selectHT = cms.bool(False),
  selectZpT = cms.bool(False),
  maxHT = cms.double(70.),
  maxVpT = cms.double(50.),
  srcEle = cms.InputTag("slimmedElectrons"),
  srcMuon = cms.InputTag("slimmedMuons"),
  srcPv = cms.InputTag("offlineSlimmedPrimaryVertices"),
  generator = cms.InputTag("generator"),
  srcGenPtc=cms.InputTag("prunedGenParticles"),
  pileupSummary = cms.InputTag("slimmedAddPileupInfo"),
  lheEvent = cms.InputTag("externalLHEProducer"),
  triggerResults = cms.InputTag("TriggerResults","","HLT"),
  triggerObjects = cms.InputTag("slimmedPatTrigger"),
  METfilters = cms.InputTag("TriggerResults","","PAT"),
  addGsfTrkMap = cms.InputTag("modifiedHEEPIDVarValueMaps2nd","eleAddGsfTrk"),
  addPackedCandMap = cms.InputTag("modifiedHEEPIDVarValueMaps2nd","eleAddPackedCand"),
  union5x5dEtaIn = cms.InputTag("modifiedHEEPIDVarValueMaps2nd","union5x5dEtaIn"),
  union5x5dPhiIn = cms.InputTag("modifiedHEEPIDVarValueMaps2nd","union5x5dPhiIn"),
  union5x5Energy = cms.InputTag("modifiedHEEPIDVarValueMaps2nd","union5x5Energy"),
  recoSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_ptAbove20_EGM2D_UL2016postVFP.root"),
  FFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/MEFF_20UL16.root"),
  PUrwgt = cms.FileInPath("ZprimeTo4l/Analysis/data/PUrwgt20UL16.root"),
  trigFilters = cms.vstring(
    "hltEG33CaloIdLMWPMS2Filter",
    "hltEle33CaloIdLGsfTrkIdVLDPhiFilter"
  ),
  trigUnseededFilters = cms.vstring(
    "hltDiEle33CaloIdLMWPMS2UnseededFilter",
    "hltDiEle33CaloIdLGsfTrkIdVLDPhiUnseededFilter"
  ),
  METfilterList = cms.vstring(
    "Flag_goodVertices",
    "Flag_globalSuperTightHalo2016Filter",
    "Flag_HBHENoiseFilter",
    "Flag_HBHENoiseIsoFilter",
    "EcalDeadCellTriggerPrimitiveFilter",
    "Flag_BadPFMuonFilter",
    "Flag_BadPFMuonDzFilter",
    "Flag_eeBadScFilter",
    "Flag_hfNoisyHitsFilter"
  ),
  etThres1 = cms.double(35.),
  mergedEleSFmuHasTrk = cms.double(1.012),
  mergedEleSFmuNoTrk = cms.double(1.004),
  mergedEleSFcl95HasTrk = cms.double(0.07007),
  mergedEleSFcl95NoTrk = cms.double(0.2448),
  mergedEleSFupperHasTrk = cms.double(1.083),
  mergedEleSFupperNoTrk = cms.double(1.785),
  mergedElePolHasTrkStr = cms.string("0.0007899*x+0.970"),
  mergedElePolNoTrkStr = cms.string("0.004586*x+0.919"),
  modHeepSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_modHeep_EGM2D_UL2016postVFP.root"),
  modHeepSFmuEB1 = cms.double(0.992),
  modHeepSFmuEB2 = cms.double(1.010),
  modHeepSFmuEE = cms.double(1.035),
  modHeepSFcl95EB1 = cms.double(0.03516),
  modHeepSFcl95EB2 = cms.double(0.03548),
  modHeepSFcl95EE = cms.double(0.06211),
  modHeepSFupperEB1 = cms.double(1.098),
  modHeepSFupperEB2 = cms.double(1.142),
  modHeepSFupperEE = cms.double(1.344),
  modHeepPolEB1str = cms.string("-7.294*0.000001*x+0.995"),
  modHeepPolEB2str = cms.string("-6.237*0.000001*x+1.012"),
  modHeepPolEEstr = cms.string("7.755*0.00001*x+1.026"),
  trigSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_passingDoubleEle33_EGM2D_UL2016postVFP.root"),
  trigUnseededSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_passingDoubleEle33unseeded_EGM2D_UL2016postVFP.root"),
  trigSF = cms.vdouble(0.994,1.000,0.996),
  trigSFcl95 = cms.vdouble(0.00186,0.001916,0.001538),
  trigSFupper = cms.vdouble(1.002,1.002,1.001),
  trigPol = cms.vstring("4.807*0.000001*x+0.993","-4.856*0.000001*x+1.0","2.582*0.000001*x+0.995"),
  trigUnseededSF = cms.vdouble(1.001,1.001,0.998),
  trigUnseededSFcl95 = cms.vdouble(0.001568,0.00158,0.001541),
  trigUnseededSFupper = cms.vdouble(1.002,1.001,1.001),
  trigUnseededPol = cms.vstring("9.716*0.0000001*x+1.001","-6.5*0.000001*x+1.002","-7.114*0.0000001*x+0.999"),
  mergedTrigSF = cms.double(1.042),
  mergedTrigSFerr = cms.double(0.131),
  abcdScaleAbove = cms.double(0.9964),
  abcdScaleBelow = cms.double(1.032),
  abcdSmear = cms.double(0.0158),
)

mergedEleCRanalyzer20UL16APV = mergedEleCRanalyzer.clone(
  recoSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_ptAbove20_EGM2D_UL2016preVFP.root"),
  FFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/MEFF_20UL16APV.root"),
  PUrwgt = cms.FileInPath("ZprimeTo4l/Analysis/data/PUrwgt20UL16.root"),
  etThres1 = cms.double(35.),
  modHeepSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_modHeep_EGM2D_UL2016preVFP.root"),
  modHeepSFmuEB1 = cms.double(0.995),
  modHeepSFmuEB2 = cms.double(1.003),
  modHeepSFmuEE = cms.double(1.007),
  modHeepSFcl95EB1 = cms.double(0.03915),
  modHeepSFcl95EB2 = cms.double(0.03809),
  modHeepSFcl95EE = cms.double(0.05239),
  modHeepSFupperEB1 = cms.double(1.116),
  modHeepSFupperEB2 = cms.double(1.112),
  modHeepSFupperEE = cms.double(1.227),
  modHeepPolEB1str = cms.string("-1.039*0.00001*x+0.998"),
  modHeepPolEB2str = cms.string("-3.185*0.00001*x+1.012"),
  modHeepPolEEstr = cms.string("7.773*0.000001*x+1.005"),
  trigSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_passingDoubleEle33_EGM2D_UL2016preVFP.root"),
  trigUnseededSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_passingDoubleEle33unseeded_EGM2D_UL2016preVFP.root"),
  trigSF = cms.vdouble(0.988,0.998,0.997),
  trigSFcl95 = cms.vdouble(0.001834,0.002808,0.001431),
  trigSFupper = cms.vdouble(1.001,1.003,1.0),
  trigPol = cms.vstring("2.616*0.000001*x+0.988","-5.892*0.000001*x+0.999","1.831*0.000001*x+0.997"),
  trigUnseededSF = cms.vdouble(0.994,0.997,0.998),
  trigUnseededSFcl95 = cms.vdouble(0.001532,0.001828,0.001396),
  trigUnseededSFupper = cms.vdouble(1.001,1.002,1.0),
  trigUnseededPol = cms.vstring("9.892*0.0000001*x+0.994","-3.34*0.000001*x+0.997","3.714*0.0000001*x+0.998"),
  abcdScaleAbove = cms.double(0.9962),
  abcdScaleBelow = cms.double(1.024),
  abcdSmear = cms.double(0.0175),
)

mergedEleCRanalyzer20UL17 = mergedEleCRanalyzer.clone(
  recoSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_ptAbove20_EGM2D_UL2017.root"),
  FFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/MEFF_20UL17.root"),
  PUrwgt = cms.FileInPath("ZprimeTo4l/Analysis/data/PUrwgt20UL17.root"),
  trigFilters = cms.vstring(
    "hltEle33CaloIdLMWPMS2Filter",
  ),
  trigUnseededFilters = cms.vstring(
    "hltDiEle33CaloIdLMWPMS2UnseededFilter",
  ),
  etThres1 = cms.double(35.),
  METfilterList = cms.vstring(
    "Flag_goodVertices",
    "Flag_globalSuperTightHalo2016Filter",
    "Flag_HBHENoiseFilter",
    "Flag_HBHENoiseIsoFilter",
    "Flag_EcalDeadCellTriggerPrimitiveFilter",
    "Flag_BadPFMuonFilter",
    "Flag_BadPFMuonDzFilter",
    "Flag_eeBadScFilter",
    "Flag_hfNoisyHitsFilter",
    "Flag_ecalBadCalibFilter"
  ),
  modHeepSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_modHeep_EGM2D_UL2017.root"),
  modHeepSFmuEB1 = cms.double(1.015),
  modHeepSFmuEB2 = cms.double(1.002),
  modHeepSFmuEE = cms.double(1.003),
  modHeepSFcl95EB1 = cms.double(0.03528),
  modHeepSFcl95EB2 = cms.double(0.02765),
  modHeepSFcl95EE = cms.double(0.02814),
  modHeepSFupperEB1 = cms.double(1.118),
  modHeepSFupperEB2 = cms.double(1.093),
  modHeepSFupperEE = cms.double(1.144),
  modHeepPolEB1str = cms.string("1.119*0.00001*x+1.012"),
  modHeepPolEB2str = cms.string("2.415*0.00001*x+0.995"),
  modHeepPolEEstr = cms.string("2.153*0.00001*x+1.001"),
  trigSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_passingDoubleEle33_EGM2D_UL2017.root"),
  trigUnseededSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_passingDoubleEle33unseeded_EGM2D_UL2017.root"),
  trigSF = cms.vdouble(0.981,0.986,0.990),
  trigSFcl95 = cms.vdouble(0.002086,0.002322,0.003689),
  trigSFupper = cms.vdouble(1.019,1.021,1.021),
  trigPol = cms.vstring("1.319*0.00001*x+0.980","1.865*0.00001*x+0.984","3.452*0.000001*x+0.990"),
  trigUnseededSF = cms.vdouble(0.99,0.991,0.999),
  trigUnseededSFcl95 = cms.vdouble(0.002185,0.002036,0.002852),
  trigUnseededSFupper = cms.vdouble(1.019,1.02,1.019),
  trigUnseededPol = cms.vstring("1.945*0.000001*x+0.99","1.532*0.00001*x+0.989","-1.462*0.00001*x+1.0"),
  abcdScaleAbove = cms.double(0.9952),
  abcdScaleBelow = cms.double(1.03),
  abcdSmear = cms.double(0.0165),
)

mergedEleCRanalyzer20UL18 = mergedEleCRanalyzer.clone(
  recoSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_ptAbove20_EGM2D_UL2018.root"),
  FFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/MEFF_20UL18.root"),
  PUrwgt = cms.FileInPath("ZprimeTo4l/Analysis/data/PUrwgt20UL18.root"),
  trigFilters = cms.vstring(
    "hltEle25CaloIdLMWPMS2Filter",
  ),
  trigUnseededFilters = cms.vstring(
    "hltDiEle25CaloIdLMWPMS2UnseededFilter",
  ),
  METfilterList = cms.vstring(
    "Flag_goodVertices",
    "Flag_globalSuperTightHalo2016Filter",
    "Flag_HBHENoiseFilter",
    "Flag_HBHENoiseIsoFilter",
    "Flag_EcalDeadCellTriggerPrimitiveFilter",
    "Flag_BadPFMuonFilter",
    "Flag_BadPFMuonDzFilter",
    "Flag_eeBadScFilter",
    "Flag_hfNoisyHitsFilter",
    "Flag_ecalBadCalibFilter"
  ),
  etThres1 = cms.double(28.),
  modHeepSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_modHeep_EGM2D_UL2018.root"),
  modHeepSFmuEB1 = cms.double(0.998),
  modHeepSFmuEB2 = cms.double(0.991),
  modHeepSFmuEE = cms.double(1.005),
  modHeepSFcl95EB1 = cms.double(0.02489),
  modHeepSFcl95EB2 = cms.double(0.03772),
  modHeepSFcl95EE = cms.double(0.04466),
  modHeepSFupperEB1 = cms.double(1.110),
  modHeepSFupperEB2 = cms.double(1.128),
  modHeepSFupperEE = cms.double(1.125),
  modHeepPolEB1str = cms.string("-8.873*0.000001*x+1.000"),
  modHeepPolEB2str = cms.string("2.09*0.000001*x+0.990"),
  modHeepPolEEstr = cms.string("2.354*0.00001*x+0.999"),
  trigSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_passingDoubleEle25_EGM2D_UL2018.root"),
  trigUnseededSFpath = cms.FileInPath("ZprimeTo4l/Analysis/data/egammaEffi_passingDoubleEle25unseeded_EGM2D_UL2018.root"),
  trigSF = cms.vdouble(0.988,0.990,1.001),
  trigSFcl95 = cms.vdouble(0.001722,0.001864,0.002017),
  trigSFupper = cms.vdouble(1.015,1.018,1.012),
  trigPol = cms.vstring("2.307*0.00001*x+0.987","1.924*0.00001*x+0.988","-1.357*0.00001*x+1.002"),
  trigUnseededSF = cms.vdouble(0.995,0.992,0.996),
  trigUnseededSFcl95 = cms.vdouble(0.001518,0.001588,0.001743),
  trigUnseededSFupper = cms.vdouble(1.015,1.019,1.011),
  trigUnseededPol = cms.vstring("4.633*0.000001*x+0.995","1.639*0.00001*x+0.991","-6.461*0.000001*x+0.997"),
  abcdScaleAbove = cms.double(0.9965),
  abcdScaleBelow = cms.double(1.03),
  abcdSmear = cms.double(0.0165),
)
